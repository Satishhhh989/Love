<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For Tanvi</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;600;700&family=Poppins:wght@200;300;400;500;600&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Tailwind Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'dusty-pink': '#D4A5A5',
                        'soft-lavender': '#9DA7CC',
                        'soft-peach': '#F4B4A6',
                        'soft-blue': '#A5C4D4',
                        'deep-blue': '#7CA5B8',
                        'gold-accent': '#D4AF37',
                        'wax-red': '#C64B4B', /* New for Wax Seal */
                        'off-white': '#F9F9F9',
                        'text-dark': '#2D2D2D',
                        'text-muted': '#888888'
                    },
                    fontFamily: {
                        'script': ['"Dancing Script"', 'cursive'],
                        'body': ['"Poppins"', 'sans-serif'],
                    },
                    animation: {
                        'float': 'float 8s ease-in-out infinite',
                        'float-delayed': 'float 8s ease-in-out 4s infinite',
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'shimmer': 'shimmer 2.5s infinite linear',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-15px)' },
                        },
                        shimmer: {
                            '0%': { backgroundPosition: '-1000px 0' },
                            '100%': { backgroundPosition: '1000px 0' }
                        }
                    }
                }
            }
        }
    </script>

    <style>
        /* --- Global & Texture --- */
        body {
            background-color: #f8f9fa;
            overflow-x: hidden;
            position: relative;
        }

        /* Noise Texture for "Premium" feel */
        .noise-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            opacity: 0.03;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
        }

        /* Ambient Background Orbs */
        .ambient-orb {
            position: fixed;
            border-radius: 50%;
            filter: blur(90px);
            z-index: -1;
            opacity: 0.5;
            animation: moveOrb 25s infinite alternate ease-in-out;
        }

        .orb-1 { width: 500px; height: 500px; background: radial-gradient(circle, #e3f2fd, #fff); top: -150px; left: -100px; }
        .orb-2 { width: 400px; height: 400px; background: radial-gradient(circle, #fce4ec, #fff); bottom: 5%; right: -100px; animation-duration: 30s; }
        .orb-3 { width: 300px; height: 300px; background: radial-gradient(circle, #fff3e0, #fff); top: 40%; left: 30%; animation-duration: 35s; }

        @keyframes moveOrb {
            0% { transform: translate(0, 0) scale(1); }
            100% { transform: translate(40px, 60px) scale(1.1); }
        }

        /* --- Animations --- */
        .reveal-text {
            animation: fadeInUp 1.2s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
            opacity: 0;
            transform: translateY(30px);
        }

        @keyframes fadeInUp {
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in { animation: fadeIn 1s ease-out forwards; opacity: 0; }
        @keyframes fadeIn { to { opacity: 1; } }

        .fade-out { animation: fadeOut 0.6s ease-out forwards; opacity: 1; }
        @keyframes fadeOut { to { opacity: 0; pointer-events: none; } }

        /* --- Glassmorphism Upgrade --- */
        .glass-card {
            background: rgba(255, 255, 255, 0.75);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.9);
            box-shadow: 
                0 4px 6px -1px rgba(0, 0, 0, 0.02), 
                0 2px 4px -1px rgba(0, 0, 0, 0.02),
                inset 0 0 20px rgba(255, 255, 255, 0.5);
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            transform-style: preserve-3d;
        }
        .glass-card:hover {
            transform: translateY(-8px) scale(1.02) rotateX(2deg);
            box-shadow: 
                0 25px 50px -12px rgba(212, 165, 165, 0.25),
                0 10px 20px -5px rgba(0, 0, 0, 0.04);
            background: rgba(255, 255, 255, 0.95);
            border-color: #fff;
        }

        /* --- 3D Envelope CSS Art --- */
        .envelope-container {
            position: relative;
            width: 100%;
            max-width: 220px;
            height: 160px;
            margin: 0 auto;
            cursor: pointer;
            perspective: 1500px; /* Increased perspective for better 3D */
        }

        .envelope-container.large { max-width: 280px; height: 200px; }

        .envelope {
            position: relative;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 
                0 20px 40px -10px rgba(0,0,0,0.1),
                0 0 0 1px rgba(0,0,0,0.02);
            border-radius: 0 0 8px 8px;
        }

        .envelope-back {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 0 0 8px 8px;
            background: #f0f0f0;
            z-index: 1;
        }

        .paper {
            position: absolute;
            bottom: 10px;
            left: 10px;
            right: 10px;
            height: 85%;
            background: #fff;
            border-radius: 6px;
            z-index: 2;
            transition: transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: flex-start;
            justify-content: center;
            padding-top: 15px;
            box-shadow: 0 -2px 8px rgba(0,0,0,0.05);
        }

        .envelope-front {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 3;
            clip-path: polygon(0 100%, 100% 100%, 100% 0, 50% 55%, 0 0);
            pointer-events: none;
        }

        .envelope-flap {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 4;
            clip-path: polygon(0 0, 50% 55%, 100% 0);
            transform-origin: top;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Wax Seal Effect */
        .envelope-flap::after {
            content: '';
            position: absolute;
            top: 52%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 24px;
            height: 24px;
            background: #C64B4B; /* Wax Color */
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2), inset 0 2px 4px rgba(255,255,255,0.3);
            z-index: 5;
            transition: opacity 0.3s;
        }
        /* Hide Seal when open */
        .envelope-container:hover .envelope-flap::after {
            opacity: 0;
        }

        /* Interactions */
        .envelope-container:hover .envelope-flap {
            transform: rotateX(180deg);
            z-index: 1;
            transition: transform 0.6s ease-in-out, z-index 0.1s 0.2s;
        }
        
        .envelope-container:hover .paper {
            transform: translateY(-70px) scale(1.02); /* More movement */
            transition: transform 0.6s 0.15s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        /* Slight tilt on hover for whole envelope */
        .envelope-container:hover .envelope {
            transform: rotateX(5deg);
        }

        /* --- Envelope Colors --- */
        /* Pink */
        .env-pink .envelope-back { background-color: #D4A5A5; }
        .env-pink .envelope-front { background-color: #EBCBCB; background-image: linear-gradient(to top, #EBCBCB, #f2dcdc); }
        .env-pink .envelope-flap { background-color: #D4A5A5; filter: brightness(0.95); }
        
        /* Lavender */
        .env-lav .envelope-back { background-color: #9DA7CC; }
        .env-lav .envelope-front { background-color: #BEC6E3; background-image: linear-gradient(to top, #BEC6E3, #d4dbf0); }
        .env-lav .envelope-flap { background-color: #9DA7CC; filter: brightness(0.95); }

        /* Peach */
        .env-peach .envelope-back { background-color: #F4B4A6; }
        .env-peach .envelope-front { background-color: #FFD4C9; background-image: linear-gradient(to top, #FFD4C9, #ffe4dc); }
        .env-peach .envelope-flap { background-color: #F4B4A6; filter: brightness(0.95); }

        /* Soft Blue */
        .env-blue .envelope-back { background-color: #A5C4D4; }
        .env-blue .envelope-front { background-color: #CDE3EE; background-image: linear-gradient(to top, #CDE3EE, #e1f0f7); }
        .env-blue .envelope-flap { background-color: #A5C4D4; filter: brightness(0.95); }

        /* Deep Blue (Favorites) */
        .env-special .envelope-back { background-color: #7CA5B8; }
        .env-special .envelope-front { background-color: #DAEBF5; }
        .env-special .envelope-flap { background-color: #7CA5B8; filter: brightness(0.95); }
        .env-special .envelope-flap::after { background-color: #D4AF37; } /* Gold seal for favorite */

        /* Gold (Secret) */
        .env-secret .envelope-back { background-color: #dcb348; }
        .env-secret .envelope-front { background-color: #fceeb5; background-image: linear-gradient(135deg, #fceeb5 0%, #fff8e1 100%);}
        .env-secret .envelope-flap { background-color: #cda43b; filter: brightness(0.95); }
        .env-secret .paper { background-color: #fffdf5; }
        .env-secret .envelope-flap::after { background-color: #333; } /* Black seal for secret */

        /* --- Password Input Shake Animation --- */
        .shake { animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }
    </style>
</head>
<body class="font-body text-text-dark min-h-screen flex flex-col items-center selection:bg-dusty-pink selection:text-white">

    <!-- Texture Overlay -->
    <div class="noise-overlay"></div>

    <!-- Ambient Background -->
    <div class="ambient-orb orb-1"></div>
    <div class="ambient-orb orb-2"></div>
    <div class="ambient-orb orb-3"></div>

    <!-- Header -->
    <header class="w-full text-center py-20 px-4 relative z-10">
        <div class="inline-block p-4 rounded-full border border-dusty-pink/30 mb-8 bg-white/40 backdrop-blur-md animate-float shadow-lg hover:scale-110 transition-transform duration-500">
            <i data-lucide="sparkles" class="w-6 h-6 text-dusty-pink fill-current"></i>
        </div>
        <h1 class="font-script text-6xl md:text-8xl font-bold text-text-dark mb-4 drop-shadow-sm tracking-wide bg-gradient-to-r from-gray-800 to-gray-500 bg-clip-text text-transparent pb-2 leading-tight">
            For my Jaanu
        </h1>
        <p class="text-soft-lavender font-light tracking-[0.4em] uppercase text-xs md:text-sm animate-float-delayed font-body">
            Just a small gift for you 
        </p>
    </header>

    <!-- Main Content -->
    <main class="w-full max-w-6xl px-6 pb-40 space-y-32 relative z-10">

        <!-- SECTION 1: Open When Envelopes -->
        <section id="letters">
            <div class="flex flex-col items-center mb-16">
                <h2 class="font-script text-5xl text-text-dark mb-3 relative inline-block">
                    Open When...
                    <!-- Underline decoration -->
                    <span class="absolute -bottom-2 left-1/2 -translate-x-1/2 w-24 h-1 bg-gradient-to-r from-transparent via-dusty-pink to-transparent opacity-60"></span>
                </h2>
            </div>

            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-x-8 gap-y-20">
                
                <!-- Envelope 1: Miss Me (Pink) -->
                <div class="group text-center cursor-pointer" onclick="openLetter('miss')">
                    <div class="envelope-container env-pink">
                        <div class="envelope">
                            <div class="envelope-back"></div>
                            <div class="paper">
                                <i data-lucide="heart" class="text-dusty-pink w-6 h-6 mt-1 opacity-70"></i>
                            </div>
                            <div class="envelope-front"></div>
                            <div class="envelope-flap"></div>
                        </div>
                    </div>
                    <p class="mt-8 font-script text-2xl text-text-dark group-hover:text-dusty-pink transition-colors opacity-70 group-hover:opacity-100 transform group-hover:-translate-y-1 duration-300">...you miss me</p>
                </div>

                <!-- Envelope 2: Sad (Lavender) -->
                <div class="group text-center cursor-pointer" onclick="openLetter('sad')">
                    <div class="envelope-container env-lav">
                        <div class="envelope">
                            <div class="envelope-back"></div>
                            <div class="paper">
                                <i data-lucide="cloud-sun" class="text-soft-lavender w-6 h-6 mt-1 opacity-70"></i>
                            </div>
                            <div class="envelope-front"></div>
                            <div class="envelope-flap"></div>
                        </div>
                    </div>
                    <p class="mt-8 font-script text-2xl text-text-dark group-hover:text-soft-lavender transition-colors opacity-70 group-hover:opacity-100 transform group-hover:-translate-y-1 duration-300">...you're sad</p>
                </div>

                <!-- Envelope 3: Hungry (Peach) -->
                <div class="group text-center cursor-pointer" onclick="openLetter('hungry')">
                    <div class="envelope-container env-peach">
                        <div class="envelope">
                            <div class="envelope-back"></div>
                            <div class="paper">
                                <i data-lucide="utensils" class="text-soft-peach w-6 h-6 mt-1 opacity-70"></i>
                            </div>
                            <div class="envelope-front"></div>
                            <div class="envelope-flap"></div>
                        </div>
                    </div>
                    <p class="mt-8 font-script text-2xl text-text-dark group-hover:text-soft-peach transition-colors opacity-70 group-hover:opacity-100 transform group-hover:-translate-y-1 duration-300">...you're hungry</p>
                </div>

                <!-- Envelope 4: Doubt (Blue) -->
                <div class="group text-center cursor-pointer" onclick="openLetter('doubt')">
                    <div class="envelope-container env-blue">
                        <div class="envelope">
                            <div class="envelope-back"></div>
                            <div class="paper">
                                <i data-lucide="anchor" class="text-soft-blue w-6 h-6 mt-1 opacity-70"></i>
                            </div>
                            <div class="envelope-front"></div>
                            <div class="envelope-flap"></div>
                        </div>
                    </div>
                    <p class="mt-8 font-script text-2xl text-text-dark group-hover:text-soft-blue transition-colors opacity-70 group-hover:opacity-100 transform group-hover:-translate-y-1 duration-300">...you doubt us</p>
                </div>

            </div>
        </section>

        <!-- SECTION 2: Favorites -->
        <section id="favorites-section">
            <div class="flex flex-col items-center mb-16">
                <h2 class="font-script text-5xl text-text-dark mb-3 relative inline-block">
                    Tanvi's Favorites
                    <span class="absolute -bottom-2 left-1/2 -translate-x-1/2 w-24 h-1 bg-gradient-to-r from-transparent via-soft-lavender to-transparent opacity-60"></span>
                </h2>
            </div>

            <!-- THE FAVORITES ENVELOPE (Initial State) -->
            <div id="favorites-envelope-wrapper" class="flex flex-col items-center justify-center py-8 transition-all duration-700">
                <div class="group text-center" onclick="revealFavorites()">
                    <div class="envelope-container large env-special">
                        <div class="envelope">
                            <div class="envelope-back"></div>
                            <div class="paper">
                                <i data-lucide="star" class="text-deep-blue w-10 h-10 mt-2 opacity-80"></i>
                            </div>
                            <div class="envelope-front"></div>
                            <div class="envelope-flap"></div>
                        </div>
                    </div>
                    <div class="mt-12 inline-flex items-center gap-3 px-8 py-3 rounded-full bg-white/60 backdrop-blur-md border border-white/80 shadow-lg cursor-pointer hover:bg-white/90 hover:scale-105 transition-all group-hover:shadow-xl">
                        <i data-lucide="sparkles" class="w-4 h-4 text-deep-blue"></i>
                        <span class="font-body text-sm font-medium text-text-dark tracking-wide">Click to reveal</span>
                    </div>
                </div>
            </div>

            <!-- THE GRID (Hidden State) -->
            <div id="favorites-grid" class="hidden grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 opacity-0 transition-opacity duration-1000">
                <!-- Javascript will inject cards here -->
            </div>
        </section>

        <!-- SECTION 3: TOP SECRET ENVELOPE -->
        <section id="secret-section" class="pt-10 border-t border-dashed border-gray-200">
            <div class="flex flex-col items-center mb-10">
                <div class="inline-flex items-center gap-2 px-3 py-1 bg-gold-accent/10 rounded-full mb-3 border border-gold-accent/20">
                    <i data-lucide="lock" class="w-3 h-3 text-gold-accent"></i>
                    <span class="text-[10px] uppercase tracking-widest font-bold text-yellow-700">Protected</span>
                </div>
                <h2 class="font-script text-4xl text-text-dark opacity-90">One Last Thing...</h2>
            </div>

            <div class="flex justify-center">
                <div class="group text-center cursor-pointer" onclick="openSecretModal()">
                    <div class="envelope-container env-secret">
                        <div class="envelope">
                            <div class="envelope-back"></div>
                            <div class="paper">
                                <i data-lucide="key" class="text-yellow-600 w-6 h-6 mt-1 opacity-70"></i>
                            </div>
                            <div class="envelope-front"></div>
                            <div class="envelope-flap"></div>
                        </div>
                    </div>
                    <p class="mt-8 font-script text-2xl text-text-dark group-hover:text-yellow-600 transition-colors opacity-70 group-hover:opacity-100">Top Secret</p>
                </div>
            </div>
        </section>

    </main>

    <footer class="w-full text-center py-12 text-text-muted text-[10px] tracking-[0.3em] uppercase opacity-50 font-light">
        <p>From Satish <span class="text-dusty-pink">â™¥</span> To Tanvi</p>
    </footer>

    <!-- MODAL: LETTER READ -->
    <div id="modal-overlay" class="fixed inset-0 z-50 flex items-center justify-center px-4 opacity-0 pointer-events-none modal-overlay bg-slate-900/10 backdrop-blur-[8px] transition-all duration-500">
        <div id="modal-content" class="bg-white/95 rounded-[2rem] p-10 md:p-14 max-w-lg w-full shadow-[0_25px_60px_-10px_rgba(0,0,0,0.15)] transform scale-95 opacity-0 modal-content border border-white relative overflow-hidden">
            
            <!-- Decorative Gradient Top -->
            <div class="absolute top-0 left-0 w-full h-1.5 bg-gradient-to-r from-dusty-pink via-soft-lavender to-soft-peach opacity-80"></div>

            <!-- Close Button -->
            <button onclick="closeModal()" class="absolute top-6 right-6 p-2 rounded-full hover:bg-gray-100 transition-colors text-gray-400 hover:text-gray-600 z-10">
                <i data-lucide="x" class="w-6 h-6"></i>
            </button>

            <!-- Content -->
            <div class="text-center pt-2 relative z-10">
                <div id="modal-icon-container" class="w-16 h-16 rounded-full bg-off-white border border-gray-100 mx-auto flex items-center justify-center mb-8 shadow-sm transition-all duration-500">
                    <i data-lucide="mail-open" class="text-dusty-pink w-6 h-6"></i>
                </div>
                
                <h3 id="modal-title" class="font-script text-4xl mb-6 text-gray-800 drop-shadow-sm">Title</h3>
                
                <div class="relative px-2">
                    <i data-lucide="quote" class="absolute -top-4 -left-1 w-4 h-4 text-dusty-pink/20 fill-current"></i>
                    <p id="modal-body" class="text-gray-600 leading-relaxed font-light text-base md:text-lg px-2 opacity-0 font-body">
                        Message goes here...
                    </p>
                    <i data-lucide="quote" class="absolute -bottom-2 -right-1 w-4 h-4 text-dusty-pink/20 fill-current rotate-180"></i>
                </div>

                <div class="mt-12 flex items-center justify-center gap-3 opacity-60">
                    <div class="h-[1px] w-12 bg-gray-300"></div>
                    <span class="font-script text-2xl text-dusty-pink">Satish</span>
                    <div class="h-[1px] w-12 bg-gray-300"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL: PASSWORD PROMPT -->
    <div id="password-overlay" class="fixed inset-0 z-[60] flex items-center justify-center px-4 opacity-0 pointer-events-none transition-all duration-300 bg-black/20 backdrop-blur-sm">
        <div id="password-modal" class="bg-white/90 rounded-3xl p-8 max-w-sm w-full shadow-2xl transform scale-90 transition-all duration-300 border border-white">
            <button onclick="closePasswordModal()" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600">
                <i data-lucide="x" class="w-5 h-5"></i>
            </button>

            <div class="text-center space-y-5">
                <div class="w-12 h-12 bg-gold-accent/10 rounded-full flex items-center justify-center mx-auto text-gold-accent">
                    <i data-lucide="lock" class="w-5 h-5"></i>
                </div>
                <div>
                    <h3 class="font-script text-3xl text-gray-800">Secret Code</h3>
                    <p class="text-xs text-gray-500 uppercase tracking-widest mt-1">For your eyes only</p>
                </div>
                
                <div class="relative">
                    <input type="password" id="password-input" placeholder="Enter password..." 
                        class="w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-3 text-center focus:outline-none focus:ring-2 focus:ring-gold-accent/50 focus:border-transparent transition-all placeholder:text-gray-300 font-body">
                </div>

                <button onclick="checkPassword()" class="w-full bg-gray-800 text-white rounded-xl py-3 font-medium hover:bg-gray-900 transition-colors shadow-lg shadow-gray-200">
                    Unlock
                </button>
                <p id="password-error" class="text-red-400 text-xs h-4 opacity-0 transition-opacity">Incorrect password</p>
            </div>
        </div>
    </div>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- DATA ---
        
        const letterContent = {
            'miss': {
                title: "When you miss me",
                // Fixed Grammar
                body: "Remember that I am always with you, even if I am miles away. I'll always be near you. Distance is just a number when the connection is this strong. Close your eyes, and I'm right there with you. I miss you too, always. I love you, as always, more than you expect. Mwaahhh!",
                icon: "heart-handshake",
                color: "text-dusty-pink"
            },
            'sad': {
                title: "When you're sad",
                // Fixed Grammar
                body: "It's okay not to be okay sometimes. Take a deep breath. You are stronger than you think, and this feeling will pass. I'm literally always with you in your ups and downs. I'm never going to leave you, no matter the situation. Girl, you are my queen, and I'm sending you the biggest, warmest, tightest hug right now. I love you so much! Mwahhhhhhhhhhhhhh!",
                icon: "sun",
                color: "text-soft-lavender"
            },
            'hungry': {
                title: "When you're Hungry",
                // Minor punctuation fix
                body: "Jaake kuch khaalo meri mataa (hehehe)",
                icon: "utensils-crossed",
                color: "text-soft-peach"
            },
            'doubt': {
                title: "When you doubt us",
                // Fixed Grammar and Flow
                body: "I guess this is the most crucial part (yeah, it is). I really want to reassure you that, girl, I want to marry you. I am not just saying this casually; I literally mean it. You have made me complete, and I can't even imagine my life without you. You have become the most important part of my life, AND I will never, ever, ever leave you in this world. I literally never imagined I would be so freakin' mad about someone, but yeah, I am, and I guess that's totally fair. Whatever, girl, you are the best! Mwahhhhhhhhhh! I love you, my Jaanu!",
                icon: "anchor",
                color: "text-soft-blue"
            },
            // SECRET CONTENT
            'secret': {
                title: "My Forever Promise",
                // Fixed Grammar and Flow
                body: "I LOVE YOU AND I AM GOING TO MARRY YOU. I want my last breaths to be in your arms, and they will be. Girl, I don't know why I am so mad about you, but I hope you will never, ever go anywhere (I know you won't). Just a few years, and I'll marry you, and we can be together for life. Even if we are apart for a few years, I'D REALLY SAY THAT I AM ALWAYS YOUR JAANU AND I'LL BE THE SAME HIM. MWAAAAAAAAAAAAHHHHHHH!",
                icon: "gem",
                color: "text-yellow-600"
            }
        };

        const favoritesData = [
            { label: "Favorite Person", value: "Mememememe", icon: "user", color: "text-dusty-pink", bg: "bg-dusty-pink/10" },
            { label: "Food", value: "Chicken Burger", icon: "sandwich", color: "text-orange-400", bg: "bg-orange-50" },
            { label: "Comfort Food", value: "Idly (jo Meri saasu banati)", icon: "soup", color: "text-yellow-500", bg: "bg-yellow-50" },
            { label: "Movie", value: "Ok Jaanu", icon: "film", color: "text-purple-400", bg: "bg-purple-50" },
            { label: "Song", value: "O Rangrez", icon: "music", color: "text-pink-400", bg: "bg-pink-50" },
            { label: "Game", value: "Chess", icon: "crown", color: "text-slate-600", bg: "bg-slate-100" },
            { label: "Hobby", value: "Listening to songs & dancing alone (She loves this)", icon: "headphones", color: "text-indigo-400", bg: "bg-indigo-50" },
            { label: "Color", value: "Blue", icon: "palette", color: "text-blue-500", bg: "bg-blue-50" },
            { label: "Chocolate", value: "Snickers", icon: "gift", color: "text-amber-700", bg: "bg-amber-50" }
        ];

        // --- RENDER FUNCTIONS ---

        function renderFavorites() {
            const grid = document.getElementById('favorites-grid');
            let html = '';

            favoritesData.forEach((item, index) => {
                const isBlueCard = item.label === "Color";
                const borderClass = isBlueCard ? 'border-blue-100 ring-2 ring-blue-50/50' : 'border-white/60';
                
                const delay = index * 100; 

                html += `
                    <div class="glass-card p-6 rounded-2xl flex items-center gap-5 ${borderClass} group cursor-default" style="animation-delay: ${delay}ms">
                        <div class="shrink-0 w-14 h-14 rounded-full ${item.bg} flex items-center justify-center transition-all duration-500 group-hover:scale-110 group-hover:rotate-[10deg] shadow-sm">
                            <i data-lucide="${item.icon}" class="${item.color} w-6 h-6"></i>
                        </div>
                        <div>
                            <h4 class="text-[10px] font-bold uppercase tracking-widest text-text-muted mb-1 opacity-60 font-body">${item.label}</h4>
                            <p class="font-medium text-text-dark text-base leading-snug group-hover:text-dusty-pink transition-colors font-body">${item.value}</p>
                        </div>
                    </div>
                `;
            });

            grid.innerHTML = html;
        }

        // --- INTERACTION LOGIC ---

        function revealFavorites() {
            const wrapper = document.getElementById('favorites-envelope-wrapper');
            const grid = document.getElementById('favorites-grid');

            wrapper.classList.add('fade-out');

            setTimeout(() => {
                wrapper.style.display = 'none';
                grid.classList.remove('hidden');
                grid.style.display = 'grid'; 
                
                setTimeout(() => {
                    grid.classList.remove('opacity-0');
                    grid.classList.add('fade-in');
                }, 50);

            }, 500);
        }

        // --- PASSWORD MODAL LOGIC ---
        const passOverlay = document.getElementById('password-overlay');
        const passModal = document.getElementById('password-modal');
        const passInput = document.getElementById('password-input');
        const passError = document.getElementById('password-error');

        function openSecretModal() {
            passOverlay.classList.remove('pointer-events-none', 'opacity-0');
            passModal.classList.remove('scale-90');
            passModal.classList.add('scale-100');
            passInput.value = '';
            passError.style.opacity = '0';
            passInput.focus();
        }

        function closePasswordModal() {
            passOverlay.classList.add('pointer-events-none', 'opacity-0');
            passModal.classList.remove('scale-100');
            passModal.classList.add('scale-90');
        }

        function checkPassword() {
            // PASSWORD SET HERE:
            const correctPassword = "love"; 

            if(passInput.value.toLowerCase() === correctPassword) {
                closePasswordModal();
                // Short delay to allow modal to close before opening letter
                setTimeout(() => {
                    openLetter('secret');
                }, 300);
            } else {
                passError.style.opacity = '1';
                passModal.classList.add('shake');
                setTimeout(() => passModal.classList.remove('shake'), 500);
            }
        }
        
        // Allow "Enter" key to submit password
        passInput.addEventListener("keypress", function(event) {
            if (event.key === "Enter") {
                checkPassword();
            }
        });


        // --- LETTER MODAL LOGIC ---

        const overlay = document.getElementById('modal-overlay');
        const content = document.getElementById('modal-content');
        const mTitle = document.getElementById('modal-title');
        const mBody = document.getElementById('modal-body');
        const mIconContainer = document.getElementById('modal-icon-container');

        function openLetter(type) {
            const data = letterContent[type];
            mTitle.innerText = data.title;
            mBody.innerText = data.body;
            
            // Update Icon
            mIconContainer.innerHTML = `<i data-lucide="${data.icon}" class="${data.color} w-8 h-8"></i>`;
            
            // Show Modal
            overlay.classList.remove('pointer-events-none', 'opacity-0');
            content.classList.remove('scale-95', 'opacity-0');
            content.classList.add('scale-100', 'opacity-100');
            
            // Text Animation
            mBody.classList.remove('reveal-text');
            void mBody.offsetWidth; 
            mBody.classList.add('reveal-text');

            lucide.createIcons(); 
        }

        function closeModal() {
            overlay.classList.add('pointer-events-none', 'opacity-0');
            content.classList.remove('scale-100', 'opacity-100');
            content.classList.add('scale-95', 'opacity-0');
        }

        // Close on click outside
        overlay.addEventListener('click', (e) => {
            if (e.target === overlay) {
                closeModal();
            }
        });
        passOverlay.addEventListener('click', (e) => {
            if (e.target === passOverlay) {
                closePasswordModal();
            }
        });

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            renderFavorites();
            lucide.createIcons();
            
            // Staggered entry animation for envelopes
            const envelopes = document.querySelectorAll('.envelope-container');
            envelopes.forEach((env, i) => {
                // Only animate the first few envelopes, leave user interaction for others
                if(i < 4) {
                    env.style.opacity = '0';
                    env.style.animation = `fadeInUp 0.8s ease-out ${i * 0.15}s forwards`;
                }
            });
        });

    </script>
</body>
</html>
